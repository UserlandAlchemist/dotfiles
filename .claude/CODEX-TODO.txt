CODEX AUTONOMOUS WORK QUEUE
============================
Updated: 2025-12-22 19:35

These tasks are SAFE for Codex to work on independently when Claude hits usage limits.
DO NOT attempt tasks marked [CLAUDE ONLY] - they require system testing.

────────────────────────────────────────────────────────────────

READY TO START (highest priority)
──────────────────────────────────

[ ] REWRITE INSTALL.astute.md IN HANDBOOK STYLE
    Location: docs/astute/INSTALL.astute.md
    Template: docs/audacious/INSTALL.audacious.md (use as style reference)
    Goal: Make it match the BSD handbook style - numbered sections, terse, imperative
    Keep: All technical content
    Change: Structure, tone, formatting

    Steps:
    1. Read docs/audacious/INSTALL.audacious.md fully to understand style
    2. Read current docs/astute/INSTALL.astute.md (if exists)
    3. Rewrite using same structure/tone as audacious version
    4. Use § symbols for major sections
    5. Clear numbered steps with expected results
    6. Focus on "why" in prose, "what" in commands

[ ] DOCUMENT VANILLA TRIXIE DIVERGENCE
    Location: Create docs/audacious/VANILLA-DIVERGENCE.md
    Goal: List everywhere we diverge from stock Debian Trixie

    Known divergences to document:
    - .bashrc is edited directly (should use drop-in overlays)
    - Systemd units in user/system dirs
    - Custom scripts in /usr/local/libexec
    - Manual /opt installations (sfizz, zyn-fusion, vcv-rack)
    - Custom kernel parameters (via UKI)
    - Power management policies

    Format:
    ## File/Area Modified
    **Location:** /path/to/file
    **Divergence:** What we changed
    **Reason:** Why we changed it
    **Vanilla path:** What stock Debian does
    **Recovery impact:** How this affects reinstalls

────────────────────────────────────────────────────────────────

READY WHEN ABOVE COMPLETE (medium priority)
────────────────────────────────────────────

[ ] INVESTIGATE ssh-astute STALL WHEN HOST IS ALREADY UP
    Symptom: ssh-astute sends WOL, waits for SSH, times out, then SSH fails
    Example:
      Sending magic packet to 255.255.255.255:9 with 60:45:cb:9b:ab:3b
      Waiting for astute to accept SSH...
      Warning: astute did not respond within timeout; attempting SSH anyway
      kex_exchange_identification: read: Connection reset by peer
      Connection reset by 192.168.1.154 port 22
    Goal: Check reachability before WOL and avoid blocking when astute is already up.

[ ] REWRITE RECOVERY.audacious.md IN HANDBOOK STYLE
    Same approach as INSTALL.astute.md task above
    Template: INSTALL.audacious.md style
    Keep all technical recovery procedures

[ ] REWRITE RESTORE.audacious.md IN HANDBOOK STYLE
    Same approach as INSTALL.astute.md task above
    Template: INSTALL.audacious.md style
    Keep all Borg restore procedures

[ ] AUDIT .gitignore COMPLETENESS
    Check if we're missing any patterns for:
    - SSH keys (should never be committed)
    - known_hosts files
    - API tokens
    - Cache directories
    - Compiled files
    - Session files

    Output: List of suggested additions (don't edit .gitignore directly)

────────────────────────────────────────────────────────────────

IMPORTANT POLICIES FOR ALL TASKS
─────────────────────────────────

**Git Push:** Use SSH agent discovery script (see HANDOFF.md)
**Sudo commands:** NEVER run directly - present to user and request output
**Complex SSH/systemd:** Possible but note uncertainties in handoff
**Git commits:** Both Claude and Codex can commit after testing

CLAUDE EXPERTISE RECOMMENDED (but not blocked)
───────────────────────────────────────────────

These benefit from Claude's robust handling, but Codex can attempt:

[x] Complex SSH debugging (note any agent/connection issues in handoff)
[x] Multi-step systemd testing (document each verification step)
[x] NAS wake/sleep orchestration (high complexity, multi-system)
[x] Backup testing (high-stakes, requires careful verification)

────────────────────────────────────────────────────────────────

COMPLETED (for reference)
──────────────────────────

[✓] Create AGENTS.md collaboration guide
[✓] Refactor NAS service to use SSH config
[✓] Add astute-nas SSH host entry
[✓] Create DRIFT-CHECK.md procedure
[✓] Rewrite INSTALL.audacious.md in handbook style
[✓] Update installed-software.audacious.md

────────────────────────────────────────────────────────────────

HANDOFF INSTRUCTIONS FOR CODEX:

When you complete work, create a summary at the bottom of this file:

HANDOFF: Codex → Claude | YYYY-MM-DD HH:MM
Task: [which task from above]
Files changed: [list]
Changes made: [brief summary]
Assumptions: [any assumptions about system/preferences]
Needs testing: [yes/no and what kind]
Risks: [anything that might break]
Documentation: [what docs were updated]
Questions for Claude: [anything unclear]

────────────────────────────────────────────────────────────────
═══════════════════════════════════════════════════════════════
HANDOFF: Codex → Claude | 2025-12-22 20:19
═══════════════════════════════════════════════════════════════

**Task Completed:** Rewrite INSTALL.astute.md in handbook style

**Files Changed:**
- docs/astute/INSTALL.astute.md — rewrite in BSD handbook style

**Summary of Changes:**
Rewrote the Astute install guide to match the audacious handbook structure with numbered § sections, terse imperatives, and expected results. Preserved all technical content while reorganizing steps for clarity. Added a system layout overview consistent with the audacious template.

**Assumptions Made:**
- The duplicated sudo package entry was unintentional and could be deduplicated.
- Using sudo in later steps remains acceptable even after root bootstrap.

**Needs Claude Review:**
- [ ] Style and formatting consistency
- [ ] Technical accuracy
- [ ] Completeness of content
- [ ] Commit message quality

**Risks/Uncertainties:**
No known technical changes; only formatting and structure were modified.

**Committed:** no
**Pushed:** no

═══════════════════════════════════════════════════════════════
═══════════════════════════════════════════════════════════════
HANDOFF: Codex → Claude | 2025-12-22 20:45
═══════════════════════════════════════════════════════════════

**Task Completed:** Document divergence from vanilla Trixie

**Files Changed:**
- docs/audacious/VANILLA-DIVERGENCE.md — new divergence reference

**Summary of Changes:**
Created a concise divergence record focused on direct overrides to Debian defaults (bash init files, systemd units, /usr/local/libexec, boot stack, ZFS root, kernel cmdline, power policy, /opt installs, and third-party repos/keyrings).

**Assumptions Made:**
- Divergence list should prioritize direct overrides and recovery impact over full package differences.

**Needs Claude Review:**
- [ ] Style and formatting consistency
- [ ] Technical accuracy
- [ ] Completeness of content
- [ ] Commit message quality

**Risks/Uncertainties:**
May be missing smaller overrides or site-specific tweaks not captured in repo.

**Committed:** yes (d00cbcd)
**Pushed:** yes

═══════════════════════════════════════════════════════════════
═══════════════════════════════════════════════════════════════
HANDOFF: Codex → Claude | 2025-12-22 20:46
═══════════════════════════════════════════════════════════════

**Task Completed:** Task 2 (vanilla divergence) + supporting doc alignment

**Files Changed:**
- docs/audacious/VANILLA-DIVERGENCE.md — new divergence reference
- docs/audacious/INSTALL.audacious.md — document third-party repos + manual Prism keyring
- docs/astute/installed-software.astute.md — curated manual package list
- docs/astute/INSTALL.astute.md — align with current services + Jellyfin repo setup

**Summary of Changes:**
Documented where Audacious diverges from stock Debian Trixie, focusing on direct overrides and recovery impact. Updated Audacious install instructions to include Jellyfin/Prism repos and manual keyring note. Added Astute installed software list and aligned Astute install docs with actual services and Jellyfin deb822 repo format.

**Assumptions Made:**
- Prism Launcher keyring was manually installed (no owning package).
- Divergence doc should prioritize direct overrides and recovery impact over package deltas.

**Needs Claude Review:**
- [ ] Style and formatting consistency
- [ ] Technical accuracy
- [ ] Completeness of content
- [ ] Commit message quality

**Risks/Uncertainties:**
- Additional local overrides may exist outside repo or captured audit.

**Committed:** yes (87af6ee, 7bd41d1, aa82cc7, d00cbcd)
**Pushed:** yes

═══════════════════════════════════════════════════════════════
