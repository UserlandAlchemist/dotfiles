# Override Debian's /usr/lib/systemd/journald.conf.d/syslog.conf
#
# Debian defaults to ForwardToSyslog=yes which assumes rsyslog is installed.
# In our minimal debootstrap install, rsyslog is not present, so we explicitly
# disable syslog forwarding.
#
# WORKAROUND: Using volatile storage (logs in /run/log/journal - RAM).
# Persistent storage (/var/log/journal) silently fails at boot with Storage=auto
# or Storage=persistent - journald creates no system journal and captures zero
# system-level logs until manually restarted. Root cause under investigation.
# Volatile mode works perfectly and provides full boot logs with debug output.
# Logs are lost on reboot but this is better than having NO system logs at all.
#
# TODO: Investigate why persistent storage fails (filesystem permissions? ZFS ACLs?
# deeper issues with /var writes at boot time?)
#
# IMPORTANT: This file must be installed as a real file (not symlink) in /etc
# so it's available at early boot before /home is mounted. Use install.sh.

[Journal]
ForwardToSyslog=no
Storage=volatile
